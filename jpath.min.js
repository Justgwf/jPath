(function(p,w){var O=!0,E=!1,F="string",P="function",G=".",H='',I='g',d=null,Q=new RegExp("([A-Za-z0-9_\\*@\\$]+(?:\\[.+?\\])?)",I),J=new RegExp("(\\S+)\\[(\\d+)\\]"),K=new RegExp("([\\w@\\.]+)\\s*([~><\\^\\*\\$\\!=]=?|\\?)\\s*([@\\w\\s_\\'\$\\.\\+-]+)(\\s*|$)",I),L=new RegExp("(\\S+)\\[(.+)\\]"),R=new RegExp("^\\s\\s*"),S=new RegExp("\\s\\s*$"),M=p.prototype.push,T=p.prototype.concat,l={trim:function(a){return a.replace(R,H).replace(S,H)},toArray:function(a){return a instanceof p?a:(a===w||a===d)?[]:[a]},traverse:function(e,s,b){var U,i=(b||this.data),k,x,f,y,z,A,B,j,n=arguments.callee,q,m,N,t;if(i&&typeof(e)===F){x=e.match(Q);f=x[0];j=x.slice(1).join(G);if(i instanceof p){k=[];for(m=0,t=i.length;t>m;m++){N=i[m];q=n.apply(this,[f,d,N]);if(((q instanceof p)&&q.length)||q!==w){M.apply(k,[q])}}if(k.length){return j?n.apply(this,[j,d,k]):k}else{return}}else if(f==="*"){return j?n.apply(this,[j,d,i]):i}else if(i[f]!==w){return j?n.apply(this,[j,d,i[f]]):i[f]}else if(J.test(f)){y=f.match(J);f=y[1];z=+y[2];return j?n.apply(this,[j,d,i[f][z]]):i[f][z]}else if(L.test(f)){A=f.match(L);f=A[1];B=A[2];var u,v,C=i[f],o;if(C instanceof p){k=[];for(m=0,t=C.length;t>m;m++){o=C[m];u=B.replace(K,function(a,c,g,h){return l.testPairs.apply(o,[c,h,g,s])});v=eval(u);if(v){M.apply(k,[o])}}if(k.length){return j?n.apply(this,[j,d,k]):k}else{return}}else{o=i;u=B.replace(K,function(a,c,g,h){return l.testPairs.apply(o,[c,h,g,s])});v=eval(u);if(v){return j?n.apply(this,[j,d,o]):o}}}}return U},matchTypes:function(a,c){var g,h;switch(typeof(a)){case F:h=c+'';break;case"boolean":h=c==="true"?O:E;break;case"number":h=+c;break;case"date":h=new Date(c).valueOf();g=a.valueOf();break;default:h=c}if(c==="null"){h=d}if(c==="undefined"){h=void(0)}return{left:(g||a),right:h}},testPairs:function(a,c,g,h){var e=E,s=a.indexOf(G)!==-1?l.traverse(a,d,this):this[a],b=l.matchTypes(s,l.trim(c));switch(g){case"=":e=(b.left===b.right);break;case"==":e=(b.left===b.right);break;case"!=":e=(b.left!==b.right);break;case"^=":e=(b.left+'').indexOf(b.right)===0;break;case"<":e=(b.left<b.right);break;case"<=":e=(b.left<=b.right);break;case">":e=(b.left>b.right);break;case">=":e=(b.left>=b.right);break;case"~=":e=((b.left+'').toLowerCase()===(b.right+'').toLowerCase());break;case"$=":e=new RegExp(b.right+"$","i").test(b.left);break;case"*=":e=(b.left+'').indexOf(b.right)!==-1;break;case"?":if(typeof(h)===P){e=h.call(this,a,c)}break}return e},merge:function(a){var c=[],g=l.toArray(a?l.traverse.apply(this,arguments):this.selection);c=T.apply([],g);return c}},D={};function r(a){if(!(this instanceof r)){return new r(a)}this.data=a||d;this.selection=[]}r.prototype={from:function(a){this.data=a;return this},first:function(){return this.selection.length?this.selection[0]:d},last:function(){return this.selection.length?this.selection.slice(-1)[0]:d},eq:function(a){return this.selection.length?this.selection[a]:d},select:function(a,c,g){this.selection=l.merge.apply(this,arguments);return this},and:function(a){this.selection=this.selection.concat(l.merge.apply(this,arguments));return this},val:function(){return this.selection}};D.select=function(a,c,g){return r(a).select(c,d,g)};D.filter=function(a,c,g){return r(a).select(c,d,g).val()};window.jPath=window.jPath||D})(Array);
